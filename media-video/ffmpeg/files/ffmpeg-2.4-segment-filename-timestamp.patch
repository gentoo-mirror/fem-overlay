--- ffmpeg-2.4.3/libavformat/utils.c.orig	2014-11-02 02:47:36.000000000 +0100
+++ ffmpeg-2.4.3/libavformat/utils.c	2014-11-19 16:09:34.138378979 +0100
@@ -23,6 +23,8 @@
 #include <assert.h>
 #include <stdarg.h>
 #include <stdint.h>
+#undef time
+#include <time.h>
 
 #include "config.h"
 
@@ -3732,12 +3734,15 @@
 int av_get_frame_filename(char *buf, int buf_size, const char *path, int number)
 {
     const char *p;
-    char *q, buf1[20], c;
-    int nd, len, percentd_found;
+    char *q, buf1[64], c;
+    int nd, len, percentd_found, percentt_found;
+    struct tm* ptm;
+    time_t epoch;
 
     q = buf;
     p = path;
     percentd_found = 0;
+    percentt_found = 0;
     for (;;) {
         c = *p++;
         if (c == '\0')
@@ -3764,6 +3769,21 @@
                 memcpy(q, buf1, len);
                 q += len;
                 break;
+            case 't':
+                if (percentt_found)
+                    goto fail;
+                percentt_found = 1;
+                // get current time as string and put it into the buffer
+                time(&epoch);
+                ptm = localtime(&epoch);
+                buf1[63] = (char) 0;
+                strftime(buf1, 63, "%Y-%m-%d_%H-%M-%S", ptm);
+                len = strlen(buf1);
+                if ((q - buf + len) > buf_size - 1)
+                    goto fail;
+                memcpy(q, buf1, len);
+                q += len;
+                break;
             default:
                 goto fail;
             }
@@ -3773,7 +3793,7 @@
                 *q++ = c;
         }
     }
-    if (!percentd_found)
+    if (!percentd_found && !percentt_found)
         goto fail;
     *q = '\0';
     return 0;
